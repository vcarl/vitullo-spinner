module.exports=function(){"use strict";var a=require("react"),b=a.createClass({displayName:"Spinner",interval:null,propTypes:{loaded:a.PropTypes.bool.isRequired,spinWait:a.PropTypes.number,msgWait:a.PropTypes.number,message:a.PropTypes.string,height:a.PropTypes.number,tickLen:a.PropTypes.number},getInitialState:function(){return{elapsed:0}},getDefaultProps:function(){return{spinWait:1,msgWait:5,tickLen:500,message:"This is taking longer than usual. Maybe check your connection?",height:100}},tick:function(){this.setState({elapsed:this.state.elapsed+this.props.tickLen/1e3})},stopTick:function(){this.setState({elapsed:0}),clearInterval(this.interval),this.interval=null},startTick:function(){null===this.interval&&(this.setState({elapsed:0}),this.interval=setInterval(this.tick,this.props.tickLen))},shouldComponentUpdate:function(a,b){return this.props.loaded===!0&&a.loaded===!1?this.startTick():this.props.loaded===!1&&a.loaded===!0&&this.stopTick(),this.props.loaded!==a.loaded?!0:this.state.elapsed<=this.props.spinWait&&b.elapsed>=a.spinWait?!0:this.state.elapsed<=this.props.msgWait&&b.elapsed>=a.msgWait?!0:!1},componentWillUnmount:function(){this.stopTick()},render:function(){var b="",c=null,d={height:this.props.height/3,width:this.props.height/3,marginLeft:this.props.height/-6,marginTop:this.props.height/-6};return this.props.loaded===!1?(this.state.elapsed>=this.props.msgWait&&(b=a.createElement("span",null,this.props.message)),this.state.elapsed>=this.props.spinWait&&(c=a.createElement("div",{className:"scrim",style:{height:this.props.height}},b,a.createElement("div",{"data-spinner":this.props.name,style:d,className:"spinner"},a.createElement("div",null)))),c):this.props.children}});return b.Mixin={addSpinners:function(a){var b;b={},"string"==typeof a?b[a]=!0:Array.isArray(a)&&a.forEach(function(a){b[a]=!0}),this.setState({spinners:b})},getSpinner:function(a){if("undefined"==typeof this.state.spinners[a])throw new Error("Can't get spinner \""+a+'", does not exist.');return this.state.spinners[a]},startSpinner:function(a){if("undefined"==typeof this.state.spinners[a])throw new Error("Can't start spinner \""+a+'", does not exist.');var b=this.state.spinners;b[a]=!1,this.setState({spinners:b})},stopSpinner:function(a){if("undefined"==typeof this.state.spinners[a])throw new Error("Can't stop spinner \""+a+'", does not exist.');var b=this.state.spinners;b[a]=!0,this.setState({spinners:b})}},b}();